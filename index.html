<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ducks All The Way Down - Premium Edition</title>
    <style>
      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        padding: 0;
        background: linear-gradient(
          135deg,
          #667eea 0%,
          #764ba2 50%,
          #f093fb 100%
        );
        font-family: "Segoe UI", -apple-system, BlinkMacSystemFont, sans-serif;
        min-height: 100vh;
        overflow-x: hidden;
        position: relative;
      }

      /* Animated background particles */
      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(
            circle at 20% 50%,
            rgba(120, 119, 198, 0.3) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 20%,
            rgba(255, 118, 117, 0.3) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 40% 80%,
            rgba(255, 204, 112, 0.3) 0%,
            transparent 50%
          );
        animation: float 20s ease-in-out infinite;
        z-index: -1;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-20px);
        }
      }

      .game-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        position: relative;
        z-index: 1;
      }

      /* Header with better typography */
      .game-header {
        text-align: center;
        margin-bottom: 30px;
      }

      .game-title {
        font-size: clamp(2rem, 5vw, 3.5rem);
        font-weight: 800;
        background: linear-gradient(135deg, #ff6b6b, #ffa726, #ffee58);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin: 0;
        text-shadow: 0 0 30px rgba(255, 107, 107, 0.5);
        animation: titlePulse 3s ease-in-out infinite;
      }

      @keyframes titlePulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.02);
        }
      }

      .game-subtitle {
        font-size: 1.1rem;
        color: rgba(255, 255, 255, 0.8);
        margin: 10px 0 0 0;
        font-weight: 300;
      }

      /* Modern card-based layout */
      .game-grid {
        display: grid;
        grid-template-columns: 1fr 400px 1fr;
        grid-template-rows: auto auto auto;
        grid-template-areas:
          "stats duck shop"
          "progress progress progress"
          "achievements achievements achievements";
        gap: 20px;
      }

      .stats-panel {
        grid-area: stats;
      }

      .duck-container {
        grid-area: duck;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .shop-panel {
        grid-area: shop;
      }

      .progress-section {
        grid-area: progress;
      }

      .achievements-section {
        grid-area: achievements;
      }

      /* Glassmorphism cards */
      .glass-card {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(20px);
        border-radius: 20px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        padding: 24px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
      }

      .glass-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
      }

      /* Stats panel styling */
      .stats-header {
        color: white;
        font-size: 1.3rem;
        font-weight: 600;
        margin-bottom: 16px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .stat-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 16px;
        margin: 8px 0;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        color: white;
        font-weight: 500;
        transition: all 0.2s ease;
      }

      .stat-item:hover {
        background: rgba(255, 255, 255, 0.15);
        transform: translateX(4px);
      }

      .stat-value {
        font-weight: 700;
        color: #ffee58;
        text-shadow: 0 0 10px rgba(255, 238, 88, 0.3);
      }

      .coins-display {
        font-size: 1.4rem;
        background: linear-gradient(135deg, #ffd700, #ffb700);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      /* Duck area with better visual hierarchy */
      .duck-info-card {
        margin-bottom: 16px;
        text-align: center;
      }

      .duck-name {
        color: white;
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 8px;
      }

      .hp-bar-container {
        position: relative;
        width: 100%;
        height: 12px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 20px;
        overflow: hidden;
        margin: 12px 0;
      }

      .hp-bar {
        height: 100%;
        background: linear-gradient(90deg, #ff6b6b, #ffa726);
        border-radius: 20px;
        transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
        position: relative;
      }

      .hp-bar::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        animation: shimmer 2s infinite;
      }

      @keyframes shimmer {
        0% {
          transform: translateX(-100%);
        }
        100% {
          transform: translateX(100%);
        }
      }

      .hp-text {
        color: rgba(255, 255, 255, 0.9);
        font-size: 0.9rem;
        margin-top: 4px;
      }

      /* Enhanced duck styling */
      .duck-area {
        position: relative;
        height: 300px;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 20px 0;
      }

      .duck {
        font-size: 8rem;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        z-index: 10;
        animation: duckFloat 4s ease-in-out infinite;
        user-select: none;
        filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.3));
      }

      @keyframes duckFloat {
        0%,
        100% {
          transform: translateY(0px) rotate(-1deg);
        }
        25% {
          transform: translateY(-15px) rotate(1deg);
        }
        50% {
          transform: translateY(-25px) rotate(-0.5deg);
        }
        75% {
          transform: translateY(-10px) rotate(0.5deg);
        }
      }

      .duck:hover {
        transform: scale(1.15) rotate(5deg);
        filter: drop-shadow(0 15px 40px rgba(0, 0, 0, 0.4));
      }

      .duck:active {
        transform: scale(0.95) rotate(-3deg);
        filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.6));
      }

      .duck.boss {
        font-size: 10rem;
        animation: bossFloat 2s ease-in-out infinite,
          bossGlow 1.5s ease-in-out infinite alternate;
        filter: drop-shadow(0 15px 40px rgba(255, 0, 0, 0.5));
      }

      .duck.boss.enraged {
        animation: bossFloat 1s ease-in-out infinite,
          bossGlow 0.8s ease-in-out infinite alternate, bossShake 0.1s infinite;
        filter: drop-shadow(0 20px 50px rgba(255, 0, 0, 0.8));
      }

      @keyframes bossFloat {
        0%,
        100% {
          transform: translateY(0px) rotate(-2deg) scale(1);
        }
        50% {
          transform: translateY(-30px) rotate(2deg) scale(1.02);
        }
      }

      @keyframes bossGlow {
        0% {
          filter: drop-shadow(0 15px 40px rgba(255, 0, 0, 0.5)) hue-rotate(0deg);
        }
        100% {
          filter: drop-shadow(0 15px 40px rgba(255, 0, 0, 0.8))
            hue-rotate(20deg);
        }
      }

      @keyframes bossShake {
        0%,
        100% {
          transform: translateX(0) rotate(0deg);
        }
        25% {
          transform: translateX(-3px) rotate(-1deg);
        }
        75% {
          transform: translateX(3px) rotate(1deg);
        }
      }

      .duck.shake {
        animation: duckShake 0.4s ease-in-out;
      }

      @keyframes duckShake {
        0%,
        100% {
          transform: translateX(0) rotate(0deg);
        }
        25% {
          transform: translateX(-15px) rotate(-8deg) scale(1.1);
        }
        75% {
          transform: translateX(15px) rotate(8deg) scale(1.1);
        }
      }

      /* Critical hit effects */
      .damage-number.crit {
        color: #ff1744;
        font-size: 4rem;
        animation: critFloat 2s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        text-shadow: 0 0 20px rgba(255, 23, 68, 0.8);
      }

      @keyframes critFloat {
        0% {
          opacity: 1;
          transform: scale(0.5) translateY(0) rotate(-10deg);
        }
        20% {
          transform: scale(1.5) translateY(-40px) rotate(5deg);
        }
        100% {
          opacity: 0;
          transform: scale(1.2) translateY(-150px) rotate(10deg);
        }
      }

      .crit-text {
        position: absolute;
        color: #ff1744;
        font-size: 3rem;
        font-weight: 900;
        pointer-events: none;
        z-index: 16;
        animation: critTextFloat 1.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8);
        text-transform: uppercase;
        letter-spacing: 3px;
      }

      @keyframes critTextFloat {
        0% {
          opacity: 1;
          transform: scale(0.3) translateY(20px) rotate(-15deg);
        }
        30% {
          transform: scale(1.2) translateY(-20px) rotate(5deg);
        }
        100% {
          opacity: 0;
          transform: scale(1) translateY(-80px) rotate(0deg);
        }
      }

      /* Boss defeat effects */
      .boss-defeat {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(135deg, #ff1744, #d50000);
        color: white;
        padding: 30px 50px;
        border-radius: 20px;
        font-size: 2.2rem;
        font-weight: 800;
        z-index: 101;
        box-shadow: 0 20px 60px rgba(213, 0, 0, 0.4);
        border: 3px solid #ffab00;
        animation: bossDefeat 2.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        text-align: center;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
      }

      @keyframes bossDefeat {
        0% {
          opacity: 0;
          transform: translate(-50%, -50%) scale(0.2) rotate(-20deg);
        }
        20% {
          opacity: 1;
          transform: translate(-50%, -50%) scale(1.15) rotate(5deg);
        }
        85% {
          opacity: 1;
          transform: translate(-50%, -50%) scale(1) rotate(0deg);
        }
        100% {
          opacity: 0;
          transform: translate(-50%, -50%) scale(0.9) rotate(3deg);
        }
      }

      /* Shop panel improvements */
      .shop-header {
        color: white;
        font-size: 1.3rem;
        font-weight: 600;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .shop-category {
        margin-bottom: 24px;
      }

      .category-title {
        color: rgba(255, 255, 255, 0.8);
        font-size: 0.9rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 12px;
        padding-left: 4px;
      }

      .shop-item {
        margin-bottom: 12px;
        position: relative;
      }

      .shop-button {
        width: 100%;
        padding: 16px 20px;
        border: none;
        border-radius: 16px;
        font-size: 0.95rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
        text-align: left;
        display: flex;
        justify-content: space-between;
        align-items: center;
        min-height: 60px;
      }

      .shop-button::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: left 0.5s;
      }

      .shop-button:hover::before {
        left: 100%;
      }

      .weapon-button {
        background: linear-gradient(135deg, #ff6b6b, #ff8a65);
        color: white;
        box-shadow: 0 4px 20px rgba(255, 107, 107, 0.3);
      }

      .weapon-button:hover:not(:disabled) {
        transform: translateY(-3px);
        box-shadow: 0 8px 30px rgba(255, 107, 107, 0.4);
      }

      .upgrade-button {
        background: linear-gradient(135deg, #7c4dff, #9c27b0);
        color: white;
        box-shadow: 0 4px 20px rgba(124, 77, 255, 0.3);
      }

      .upgrade-button:hover:not(:disabled) {
        transform: translateY(-3px);
        box-shadow: 0 8px 30px rgba(124, 77, 255, 0.4);
      }

      .shop-button:disabled {
        background: rgba(255, 255, 255, 0.1);
        color: rgba(255, 255, 255, 0.4);
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
      }

      .button-content {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .button-title {
        font-size: 1rem;
        font-weight: 600;
      }

      .button-description {
        font-size: 0.85rem;
        opacity: 0.8;
      }

      .button-price {
        font-size: 1.1rem;
        font-weight: 700;
        color: #ffee58;
        text-shadow: 0 0 10px rgba(255, 238, 88, 0.3);
      }

      /* Enhanced visual effects */
      .damage-number {
        position: absolute;
        color: #ff4757;
        font-size: 2.5rem;
        font-weight: 800;
        pointer-events: none;
        z-index: 15;
        animation: damageFloat 1.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
      }

      @keyframes damageFloat {
        0% {
          opacity: 1;
          transform: scale(0.8) translateY(0) rotate(-5deg);
        }
        15% {
          transform: scale(1.3) translateY(-30px) rotate(2deg);
        }
        100% {
          opacity: 0;
          transform: scale(1) translateY(-120px) rotate(5deg);
        }
      }

      .coin-effect {
        position: absolute;
        color: #ffd700;
        font-size: 1.8rem;
        font-weight: 700;
        pointer-events: none;
        z-index: 15;
        animation: coinFloat 2.2s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
      }

      @keyframes coinFloat {
        0% {
          opacity: 1;
          transform: translateY(0) scale(0.5) rotate(0deg);
        }
        20% {
          transform: translateY(-40px) scale(1.2) rotate(180deg);
        }
        100% {
          opacity: 0;
          transform: translateY(-140px) scale(1) rotate(360deg);
        }
      }

      /* Explosion effects */
      .explosion {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        pointer-events: none;
        z-index: 20;
      }

      .explosion-particle {
        position: absolute;
        width: 8px;
        height: 8px;
        border-radius: 50%;
        animation: explode 1.2s cubic-bezier(0.4, 0, 0.2, 1) forwards;
      }

      @keyframes explode {
        0% {
          opacity: 1;
          transform: translate(0, 0) scale(1);
        }
        100% {
          opacity: 0;
          transform: translate(var(--dx), var(--dy)) scale(0);
        }
      }

      /* Level complete notification */
      .level-complete {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(0, 0, 0, 0.9);
        backdrop-filter: blur(20px);
        color: white;
        padding: 40px 60px;
        border-radius: 24px;
        font-size: 1.8rem;
        font-weight: 700;
        z-index: 100;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        border: 2px solid rgba(255, 255, 255, 0.2);
        animation: levelComplete 3.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        text-align: center;
      }

      @keyframes levelComplete {
        0% {
          opacity: 0;
          transform: translate(-50%, -50%) scale(0.3) rotate(-10deg);
        }
        20% {
          opacity: 1;
          transform: translate(-50%, -50%) scale(1.1) rotate(2deg);
        }
        80% {
          opacity: 1;
          transform: translate(-50%, -50%) scale(1) rotate(0deg);
        }
        100% {
          opacity: 0;
          transform: translate(-50%, -50%) scale(0.8) rotate(3deg);
        }
      }

      /* Achievements section */
      .achievements-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
      }

      .achievement {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        padding: 16px;
        text-align: center;
        transition: all 0.3s ease;
        border: 1px solid transparent;
      }

      .achievement.unlocked {
        border-color: #ffd700;
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
      }

      .achievement-icon {
        font-size: 2rem;
        margin-bottom: 8px;
        filter: grayscale(100%);
        transition: filter 0.3s ease;
      }

      .achievement.unlocked .achievement-icon {
        filter: grayscale(0%);
      }

      .achievement-title {
        color: white;
        font-weight: 600;
        margin-bottom: 4px;
      }

      .achievement-description {
        color: rgba(255, 255, 255, 0.7);
        font-size: 0.85rem;
      }

      /* Responsive design */
      @media (max-width: 1024px) {
        .game-grid {
          grid-template-columns: 1fr;
          grid-template-areas:
            "duck"
            "progress"
            "stats"
            "shop"
            "achievements";
        }
      }

      @media (max-width: 768px) {
        .game-container {
          padding: 16px;
        }

        .glass-card {
          padding: 20px;
        }

        .duck {
          font-size: 6rem;
        }

        .duck-area {
          height: 250px;
        }

        .level-complete {
          padding: 30px 40px;
          font-size: 1.4rem;
          margin: 0 20px;
          max-width: calc(100vw - 40px);
        }
      }

      @media (max-width: 480px) {
        .game-container {
          padding: 12px;
        }

        .glass-card {
          padding: 16px;
          border-radius: 16px;
        }

        .duck {
          font-size: 5rem;
        }

        .duck-area {
          height: 200px;
        }

        .shop-button {
          padding: 12px 16px;
          min-height: 50px;
        }

        .level-complete {
          padding: 20px 30px;
          font-size: 1.2rem;
        }
      }

      /* Loading animation */
      .game-container {
        animation: fadeIn 1s ease-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>
  <body>
    <div class="game-container">
      <div class="game-header">
        <h1 class="game-title">🦆 DUCK DESTROYER 🔫</h1>
        <p class="game-subtitle">Premium Duck Elimination Experience</p>
      </div>

      <div class="game-grid">
        <div class="stats-panel glass-card">
          <div class="stats-header">📊 Your Arsenal</div>
          <div class="stat-item">
            <span>💰 Coins</span>
            <span class="stat-value coins-display" id="coins">0</span>
          </div>
          <div class="stat-item">
            <span>🎯 Current Weapon</span>
            <span class="stat-value">
              <span id="weaponIcon">👆</span>
              <span id="weaponName">Finger</span>
            </span>
          </div>
          <div class="stat-item">
            <span>💥 Damage</span>
            <span class="stat-value" id="weaponDamage">1</span>
          </div>
          <div class="stat-item">
            <span>🤖 Auto DPS</span>
            <span class="stat-value" id="autoClickerDamageDisplay">0</span>
          </div>
          <div class="stat-item">
            <span>🏆 Ducks Eliminated</span>
            <span class="stat-value" id="ducksKilled">0</span>
          </div>
          <div class="stat-item">
            <span>👹 Bosses Defeated</span>
            <span class="stat-value" id="bossesKilled">0</span>
          </div>
        </div>

        <div class="duck-container">
          <div class="duck-info-card glass-card">
            <div class="duck-name">
              <span id="duckTitle">Duck #<span id="duckNumber">1</span></span>
              <span
                id="bossIndicator"
                style="display: none; color: #ff1744; font-weight: 800"
              >
                👹 BOSS</span
              >
            </div>
            <div class="hp-bar-container">
              <div class="hp-bar" id="hpBar"></div>
            </div>
            <div class="hp-text">
              <span id="currentHP">1</span> / <span id="maxHP">1</span> HP
              <span
                id="bossPhase"
                style="display: none; color: #ff1744; font-weight: 700"
              ></span>
            </div>
          </div>

          <div class="duck-area" id="duckArea">
            <div class="duck" id="duck">🦆</div>
          </div>
        </div>

        <div class="shop-panel glass-card">
          <div class="shop-header">🛒 Upgrade Shop</div>

          <div class="shop-category">
            <div class="category-title">Weapons</div>
            <div class="shop-item">
              <button class="shop-button weapon-button" id="buyKnife">
                <div class="button-content">
                  <div class="button-title">🔪 Combat Knife</div>
                  <div class="button-description">20 damage per hit</div>
                </div>
                <div class="button-price">50💰</div>
              </button>
            </div>
            <div class="shop-item">
              <button class="shop-button weapon-button" id="buyGun">
                <div class="button-content">
                  <div class="button-title">🔫 Tactical Gun</div>
                  <div class="button-description">200 damage per shot</div>
                </div>
                <div class="button-price">1000💰</div>
              </button>
            </div>
          </div>

          <div class="shop-category">
            <div class="category-title">Upgrades</div>
            <div class="shop-item">
              <button class="shop-button upgrade-button" id="upgradeClick">
                <div class="button-content">
                  <div class="button-title">💪 Enhance Damage</div>
                  <div class="button-description">+1 damage to all attacks</div>
                </div>
                <div class="button-price">
                  <span id="upgradePrice">10</span>💰
                </div>
              </button>
            </div>
            <div class="shop-item">
              <button class="shop-button upgrade-button" id="buyAutoClicker">
                <div class="button-content">
                  <div class="button-title">🤖 Auto Striker</div>
                  <div class="button-description">1 damage per second</div>
                </div>
                <div class="button-price">25💰</div>
              </button>
            </div>
            <div class="shop-item">
              <button class="shop-button upgrade-button" id="upgradeDuck">
                <div class="button-content">
                  <div class="button-title">🦆 Elite Ducks</div>
                  <div class="button-description">2x HP, 1.5x coin rewards</div>
                </div>
                <div class="button-price">
                  <span id="duckUpgradePrice">50</span>💰
                </div>
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="achievements-section glass-card">
        <div class="stats-header">🏆 Achievements</div>
        <div class="achievements-grid" id="achievementGrid">
          <!-- Achievements will be populated by JavaScript -->
        </div>
      </div>
    </div>

    <script>
      let gameState = {
        coins: 0,
        currentDuck: 1,
        ducksKilled: 0,
        clickDamage: 1,
        weapon: {
          name: "Finger",
          damage: 1,
          icon: "👆",
        },
        upgradePrice: 5, // Reduced from 10 for faster early progression
        currentHP: 1,
        maxHP: 1,
        hasKnife: false,
        hasGun: false,
        knifeLevel: 0,
        gunLevel: 0,
        duckUpgradeLevel: 0,
        duckUpgradePrice: 75, // Increased slightly to balance new economy
        duckHPMultiplier: 1,
        duckCoinMultiplier: 1,
        hasAutoClicker: false,
        autoClickerDamage: 1,
        autoClickerUpgradePrice: 20,
        autoClickerInterval: null,
        achievements: new Set(),
        // New boss and crit system
        isBoss: false,
        bossPhase: "normal", // 'normal' or 'enraged'
        critChance: 8, // Base 8% crit chance
        critMultiplier: 3,
        bossesKilled: 0,
      };

      const achievements = [
        {
          id: "first_kill",
          icon: "🎯",
          title: "First Blood",
          description: "Kill your first duck",
          requirement: () => gameState.ducksKilled >= 1,
        },
        {
          id: "quick_start",
          icon: "⚡",
          title: "Quick Start",
          description: "Kill 3 ducks in first minute",
          requirement: () => gameState.ducksKilled >= 3,
        },
        {
          id: "coin_collector",
          icon: "💰",
          title: "Coin Collector",
          description: "Earn 50 coins",
          requirement: () => gameState.coins >= 50,
        },
        {
          id: "weapon_master",
          icon: "⚔️",
          title: "Weapon Master",
          description: "Buy your first weapon",
          requirement: () => gameState.hasKnife || gameState.hasGun,
        },
        {
          id: "duck_hunter",
          icon: "🏹",
          title: "Duck Hunter",
          description: "Kill 10 ducks",
          requirement: () => gameState.ducksKilled >= 10,
        },
        {
          id: "first_boss",
          icon: "👹",
          title: "Boss Slayer",
          description: "Defeat your first boss duck",
          requirement: () => gameState.bossesKilled >= 1,
        },
        {
          id: "automation",
          icon: "🤖",
          title: "Automation",
          description: "Buy auto clicker",
          requirement: () => gameState.hasAutoClicker,
        },
        {
          id: "power_player",
          icon: "💪",
          title: "Power Player",
          description: "Upgrade damage 5 times",
          requirement: () => gameState.clickDamage >= 6,
        },
        {
          id: "elite_hunter",
          icon: "👑",
          title: "Elite Hunter",
          description: "Kill 25 ducks",
          requirement: () => gameState.ducksKilled >= 25,
        },
        {
          id: "boss_hunter",
          icon: "🔥",
          title: "Boss Hunter",
          description: "Defeat 5 boss ducks",
          requirement: () => gameState.bossesKilled >= 5,
        },
      ];

      const elements = {
        coins: document.getElementById("coins"),
        duckNumber: document.getElementById("duckNumber"),
        duckTitle: document.getElementById("duckTitle"),
        bossIndicator: document.getElementById("bossIndicator"),
        bossPhase: document.getElementById("bossPhase"),
        weaponIcon: document.getElementById("weaponIcon"),
        weaponName: document.getElementById("weaponName"),
        weaponDamage: document.getElementById("weaponDamage"),
        ducksKilled: document.getElementById("ducksKilled"),
        bossesKilled: document.getElementById("bossesKilled"),
        autoClickerDamageDisplay: document.getElementById(
          "autoClickerDamageDisplay"
        ),
        currentHP: document.getElementById("currentHP"),
        maxHP: document.getElementById("maxHP"),
        hpBar: document.getElementById("hpBar"),
        duck: document.getElementById("duck"),
        duckArea: document.getElementById("duckArea"),
        upgradeClick: document.getElementById("upgradeClick"),
        upgradePrice: document.getElementById("upgradePrice"),
        buyKnife: document.getElementById("buyKnife"),
        buyGun: document.getElementById("buyGun"),
        upgradeDuck: document.getElementById("upgradeDuck"),
        duckUpgradePrice: document.getElementById("duckUpgradePrice"),
        buyAutoClicker: document.getElementById("buyAutoClicker"),
        achievementGrid: document.getElementById("achievementGrid"),
      };

      function updateDisplay() {
        elements.coins.textContent = gameState.coins.toLocaleString();
        elements.duckNumber.textContent = gameState.currentDuck;
        elements.weaponIcon.textContent = gameState.weapon.icon;
        elements.weaponName.textContent = gameState.weapon.name;
        elements.weaponDamage.textContent = gameState.weapon.damage;
        elements.ducksKilled.textContent = gameState.ducksKilled;
        elements.bossesKilled.textContent = gameState.bossesKilled;
        elements.autoClickerDamageDisplay.textContent = gameState.hasAutoClicker
          ? gameState.autoClickerDamage
          : 0;
        elements.currentHP.textContent = gameState.currentHP;
        elements.maxHP.textContent = gameState.maxHP;
        elements.upgradePrice.textContent = gameState.upgradePrice;
        elements.duckUpgradePrice.textContent = gameState.duckUpgradePrice;

        // Update boss display
        if (gameState.isBoss) {
          elements.bossIndicator.style.display = "inline";
          elements.duck.classList.add("boss");
          if (gameState.bossPhase === "enraged") {
            elements.duck.classList.add("enraged");
            elements.bossPhase.style.display = "inline";
            elements.bossPhase.textContent = " - ENRAGED!";
          } else {
            elements.duck.classList.remove("enraged");
            elements.bossPhase.style.display = "none";
          }
        } else {
          elements.bossIndicator.style.display = "none";
          elements.bossPhase.style.display = "none";
          elements.duck.classList.remove("boss", "enraged");
        }

        const progress =
          ((gameState.maxHP - gameState.currentHP) / gameState.maxHP) * 100;
        elements.hpBar.style.width = progress + "%";

        // Boss HP bar gets red color
        if (gameState.isBoss) {
          elements.hpBar.style.background =
            "linear-gradient(90deg, #ff1744, #d50000)";
          elements.hpBar.style.boxShadow = "0 0 20px rgba(255, 23, 68, 0.6)";
        } else {
          elements.hpBar.style.background =
            "linear-gradient(90deg, #ff6b6b, #ffa726)";
          elements.hpBar.style.boxShadow = "0 0 20px rgba(255, 107, 107, 0.5)";
        }

        // Update shop button states
        elements.upgradeClick.disabled =
          gameState.coins < gameState.upgradePrice;
        elements.buyKnife.disabled = gameState.coins < 50 || gameState.hasKnife;
        elements.buyGun.disabled = gameState.coins < 1000 || gameState.hasGun;
        elements.upgradeDuck.disabled =
          gameState.coins < gameState.duckUpgradePrice;
        elements.buyAutoClicker.disabled =
          gameState.coins < 25 || gameState.hasAutoClicker;

        // Update button text for owned items
        if (gameState.hasKnife) {
          elements.buyKnife.innerHTML = `
                    <div class="button-content">
                        <div class="button-title">🔪 Combat Knife</div>
                        <div class="button-description">OWNED - Level ${gameState.knifeLevel}</div>
                    </div>
                    <div class="button-price">✓</div>
                `;
        }
        if (gameState.hasGun) {
          elements.buyGun.innerHTML = `
                    <div class="button-content">
                        <div class="button-title">🔫 Tactical Gun</div>
                        <div class="button-description">OWNED - Level ${gameState.gunLevel}</div>
                    </div>
                    <div class="button-price">✓</div>
                `;
        }
        if (gameState.hasAutoClicker) {
          elements.buyAutoClicker.innerHTML = `
                    <div class="button-content">
                        <div class="button-title">🤖 Auto Striker</div>
                        <div class="button-description">ACTIVE - Level ${gameState.autoClickerDamage}</div>
                    </div>
                    <div class="button-price">✓</div>
                `;
        }

        checkAchievements();
      }

      function checkAchievements() {
        achievements.forEach((achievement) => {
          if (
            !gameState.achievements.has(achievement.id) &&
            achievement.requirement()
          ) {
            gameState.achievements.add(achievement.id);
            showAchievementUnlocked(achievement);
          }
        });
        updateAchievementDisplay();
      }

      function updateAchievementDisplay() {
        elements.achievementGrid.innerHTML = "";
        achievements.forEach((achievement) => {
          const isUnlocked = gameState.achievements.has(achievement.id);
          const achievementElement = document.createElement("div");
          achievementElement.className = `achievement ${
            isUnlocked ? "unlocked" : ""
          }`;
          achievementElement.innerHTML = `
                    <div class="achievement-icon">${achievement.icon}</div>
                    <div class="achievement-title">${achievement.title}</div>
                    <div class="achievement-description">${achievement.description}</div>
                `;
          elements.achievementGrid.appendChild(achievementElement);
        });
      }

      function showAchievementUnlocked(achievement) {
        const achievementEl = document.createElement("div");
        achievementEl.className = "level-complete";
        achievementEl.innerHTML = `🏆 Achievement Unlocked!<br>${achievement.icon} ${achievement.title}`;
        document.body.appendChild(achievementEl);

        setTimeout(() => achievementEl.remove(), 2500);
      }

      function createDamageNumber(damage, x, y, isCrit = false) {
        const damageEl = document.createElement("div");
        damageEl.className = isCrit ? "damage-number crit" : "damage-number";
        damageEl.textContent = `-${damage.toLocaleString()}`;
        damageEl.style.left = x + "px";
        damageEl.style.top = y + "px";
        elements.duckArea.appendChild(damageEl);

        if (isCrit) {
          // Add CRIT text
          const critText = document.createElement("div");
          critText.className = "crit-text";
          critText.textContent = "CRIT!";
          critText.style.left = x - 40 + "px";
          critText.style.top = y - 60 + "px";
          elements.duckArea.appendChild(critText);

          setTimeout(() => critText.remove(), 1500);
          setTimeout(() => damageEl.remove(), 2000);
        } else {
          setTimeout(() => damageEl.remove(), 1800);
        }
      }

      function createCoinEffect(coins, x, y) {
        const coinEl = document.createElement("div");
        coinEl.className = "coin-effect";
        coinEl.textContent = `+${coins.toLocaleString()}💰`;
        coinEl.style.left = x + "px";
        coinEl.style.top = y + "px";
        elements.duckArea.appendChild(coinEl);

        setTimeout(() => coinEl.remove(), 2200);
      }

      function createExplosion() {
        const explosion = document.createElement("div");
        explosion.className = "explosion";

        const colors = [
          "#ff6b6b",
          "#ffa726",
          "#ffee58",
          "#66bb6a",
          "#42a5f5",
          "#ab47bc",
        ];

        for (let i = 0; i < 30; i++) {
          const particle = document.createElement("div");
          particle.className = "explosion-particle";
          particle.style.backgroundColor =
            colors[Math.floor(Math.random() * colors.length)];

          const angle = (Math.PI * 2 * i) / 30;
          const distance = 100 + Math.random() * 150;
          const dx = Math.cos(angle) * distance;
          const dy = Math.sin(angle) * distance;

          particle.style.setProperty("--dx", dx + "px");
          particle.style.setProperty("--dy", dy + "px");

          explosion.appendChild(particle);
        }

        elements.duckArea.appendChild(explosion);
        setTimeout(() => explosion.remove(), 1200);
      }

      function showBossDefeat() {
        const bossEl = document.createElement("div");
        bossEl.className = "boss-defeat";
        bossEl.innerHTML = `👹💥 BOSS DEFEATED!<br>🎁 Epic Rewards Earned!`;
        document.body.appendChild(bossEl);

        setTimeout(() => bossEl.remove(), 2500);
      }

      function checkBossPhase() {
        if (gameState.isBoss && gameState.bossPhase === "normal") {
          // Enter enraged phase at 30% HP
          if (gameState.currentHP <= Math.floor(gameState.maxHP * 0.3)) {
            gameState.bossPhase = "enraged";
            updateDisplay();
          }
        }
      }

      function showLevelComplete() {
        const bonusCoins = Math.floor(
          gameState.currentDuck * gameState.duckCoinMultiplier
        );
        const levelEl = document.createElement("div");
        levelEl.className = "level-complete";
        levelEl.innerHTML = `🦆💥 Duck #${
          gameState.currentDuck
        } Eliminated!<br>+${bonusCoins.toLocaleString()} Bonus Coins!`;
        document.body.appendChild(levelEl);

        setTimeout(() => levelEl.remove(), 2000);
      }
      function autoClickerAttack() {
        if (gameState.currentHP <= 0 || !gameState.hasAutoClicker) return;

        const damage = gameState.autoClickerDamage;
        gameState.currentHP = Math.max(0, gameState.currentHP - damage);
        gameState.coins += 1;

        const duckRect = elements.duck.getBoundingClientRect();
        const areaRect = elements.duckArea.getBoundingClientRect();
        const centerX = duckRect.left + duckRect.width / 2 - areaRect.left;
        const centerY = duckRect.top + duckRect.height / 2 - areaRect.top;

        createDamageNumber(damage, centerX, centerY);
        createCoinEffect(1, centerX - 50, centerY - 30);

        elements.duck.classList.add("shake");
        setTimeout(() => elements.duck.classList.remove("shake"), 200);

        checkBossPhase();
        updateDisplay();

        if (gameState.currentHP <= 0) {
          setTimeout(nextDuck, 400);
        }
      }

      function nextDuck() {
        createExplosion();
        showLevelComplete();

        const baseBonusCoins = gameState.currentDuck;
        const bonusCoins = Math.floor(
          baseBonusCoins * gameState.duckCoinMultiplier
        );
        gameState.coins += bonusCoins;
        gameState.ducksKilled++;

        elements.duck.style.opacity = "0";

        setTimeout(() => {
          gameState.currentDuck++;
          gameState.maxHP = Math.floor(
            gameState.currentDuck * gameState.duckHPMultiplier
          );
          gameState.currentHP = gameState.maxHP;

          elements.duck.style.opacity = "1";
          updateDisplay();
        }, 1000);
      }

      function attackDuck(e) {
        if (gameState.currentHP <= 0) return;

        const areaRect = elements.duckArea.getBoundingClientRect();

        let clientX, clientY;
        if (e.touches && e.touches.length > 0) {
          clientX = e.touches[0].clientX;
          clientY = e.touches[0].clientY;
          e.preventDefault();
        } else {
          clientX = e.clientX;
          clientY = e.clientY;
        }

        const x = clientX - areaRect.left;
        const y = clientY - areaRect.top;

        // Check for critical hit
        let baseCritChance = gameState.critChance;
        if (gameState.isBoss) {
          baseCritChance = 15; // Higher crit chance against bosses
        }

        const isCrit = Math.random() * 100 < baseCritChance;
        const baseDamage = gameState.weapon.damage;
        const damage = isCrit
          ? baseDamage * gameState.critMultiplier
          : baseDamage;

        gameState.currentHP = Math.max(0, gameState.currentHP - damage);

        // Enhanced coin rewards - bonus for early ducks to jumpstart progression
        let coinReward = Math.ceil(baseDamage / 10);
        if (gameState.ducksKilled < 10) {
          coinReward += 2; // Extra coins for first 10 ducks
        }
        if (isCrit) {
          coinReward *= 2; // Double coins on crit
        }
        gameState.coins += coinReward;

        createDamageNumber(damage, x, y, isCrit);
        createCoinEffect(coinReward, x - 50, y - 30);

        elements.duck.classList.add("shake");
        setTimeout(() => elements.duck.classList.remove("shake"), 400);

        checkBossPhase();
        updateDisplay();

        if (gameState.currentHP <= 0) {
          setTimeout(nextDuck, 400);
        }
      }

      // Shop functions
      elements.upgradeClick.onclick = () => {
        if (gameState.coins >= gameState.upgradePrice) {
          gameState.coins -= gameState.upgradePrice;
          gameState.clickDamage++;

          if (gameState.weapon.name === "Finger") {
            gameState.weapon.damage = gameState.clickDamage;
          }

          gameState.upgradePrice = Math.floor(gameState.upgradePrice * 1.3); // Gentler scaling
          updateDisplay();
        }
      };

      elements.buyKnife.onclick = () => {
        if (gameState.coins >= 50 && !gameState.hasKnife) {
          gameState.coins -= 50;
          gameState.hasKnife = true;
          gameState.knifeLevel = 1;
          gameState.weapon = {
            name: "Knife",
            damage: 20,
            icon: "🔪",
          };
          updateDisplay();
        }
      };

      elements.buyGun.onclick = () => {
        if (gameState.coins >= 1000 && !gameState.hasGun) {
          gameState.coins -= 1000;
          gameState.hasGun = true;
          gameState.gunLevel = 1;
          gameState.weapon = {
            name: "Gun",
            damage: 200,
            icon: "🔫",
          };
          updateDisplay();
        }
      };

      elements.upgradeDuck.onclick = () => {
        if (gameState.coins >= gameState.duckUpgradePrice) {
          gameState.coins -= gameState.duckUpgradePrice;
          gameState.duckUpgradeLevel++;
          gameState.duckHPMultiplier *= 2;
          gameState.duckCoinMultiplier *= 1.5;
          gameState.duckUpgradePrice *= 2;

          if (gameState.currentHP > 0) {
            const newMaxHP = Math.max(
              1,
              Math.floor(
                gameState.currentDuck * 0.8 * gameState.duckHPMultiplier
              )
            );
            const hpRatio = gameState.currentHP / gameState.maxHP;
            gameState.maxHP = newMaxHP;
            gameState.currentHP = Math.floor(newMaxHP * hpRatio);
          }

          updateDisplay();
        }
      };

      elements.buyAutoClicker.onclick = () => {
        if (gameState.coins >= 25 && !gameState.hasAutoClicker) {
          gameState.coins -= 25;
          gameState.hasAutoClicker = true;
          gameState.autoClickerDamage = 1;

          gameState.autoClickerInterval = setInterval(autoClickerAttack, 1000);

          updateDisplay();
        }
      };

      elements.duck.addEventListener("click", attackDuck);
      elements.duck.addEventListener("touchstart", attackDuck);
      elements.duck.addEventListener("contextmenu", (e) => e.preventDefault());

      // Initialize
      updateDisplay();
      updateAchievementDisplay();
    </script>
  </body>
</html>
